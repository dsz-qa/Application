<UserControl x:Class="Finly.Views.Controls.PeriodBarControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
	<UserControl.Resources>
		<Style x:Key="ChipToggle" TargetType="RadioButton">
			<Setter Property="Foreground" Value="White"/>
			<Setter Property="Background" Value="Transparent"/>
			<Setter Property="BorderThickness" Value="0"/>
			<Setter Property="Padding" Value="10,6"/>
			<Setter Property="Margin" Value="2,0"/>
			<Setter Property="Cursor" Value="Hand"/>
			<Setter Property="Template">
				<Setter.Value>
					<ControlTemplate TargetType="RadioButton">
						<Border x:Name="bg" CornerRadius="6" Background="{TemplateBinding Background}">
							<ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
						</Border>
						<ControlTemplate.Triggers>
							<Trigger Property="IsChecked" Value="True">
								<Setter TargetName="bg" Property="Background" Value="#33FFFFFF"/>
							</Trigger>
							<Trigger Property="IsMouseOver" Value="True">
								<Setter TargetName="bg" Property="Background" Value="#22FFFFFF"/>
							</Trigger>
						</ControlTemplate.Triggers>
					</ControlTemplate>
				</Setter.Value>
			</Setter>
		</Style>
	</UserControl.Resources>

	<Border Background="{DynamicResource Brand.Blue}" CornerRadius="12" Padding="8">
		<Grid>
			<Grid.ColumnDefinitions>
				<ColumnDefinition Width="Auto"/>
				<ColumnDefinition Width="*"/>
				<ColumnDefinition Width="Auto"/>
			</Grid.ColumnDefinitions>

			<!-- ◀︎ -->
			<Button Grid.Column="0" Click="Prev_Click"
                    Background="#22FFFFFF" Foreground="White" BorderBrush="{x:Null}"
                    Padding="12,6" Margin="0,0,6,0" Cursor="Hand">
				<TextBlock Text="◀" FontSize="14"/>
			</Button>

			<!-- Środek (etykieta + popup) -->
			<Border Grid.Column="1" Background="#22FFFFFF" CornerRadius="8"
                    MouseLeftButtonUp="Center_Click" Cursor="Hand">
				<DockPanel LastChildFill="False" Margin="10,6">
					<TextBlock Text="{Binding PeriodLabel, RelativeSource={RelativeSource AncestorType=UserControl}}"
                               Foreground="White" FontWeight="SemiBold"/>
					<TextBlock Text="▼" Foreground="White" Margin="8,0,0,0"/>
				</DockPanel>
			</Border>

			<Popup x:Name="PickerPopup" Placement="Bottom"
                   PlacementTarget="{Binding RelativeSource={RelativeSource AncestorType=UserControl}}"
                   StaysOpen="False" AllowsTransparency="True">
				<Border Background="{DynamicResource Surface.Background}"
                        BorderBrush="{DynamicResource Surface.Border}"
                        BorderThickness="1" CornerRadius="10" Padding="12">
					<StackPanel>
						<TextBlock Text="Wybierz okres" FontWeight="SemiBold" Margin="0,0,0,6"/>
						<UniformGrid Columns="2" Rows="2" Margin="0,4,0,8">
							<Button Content="Dzisiaj"     Click="Pick_Today"       Margin="4"/>
							<Button Content="Ten miesiąc" Click="Pick_ThisMonth"   Margin="4"/>
							<Button Content="Ten kwartał" Click="Pick_ThisQuarter" Margin="4"/>
							<Button Content="Ten rok"     Click="Pick_ThisYear"    Margin="4"/>
						</UniformGrid>
						<StackPanel Orientation="Horizontal">
							<DatePicker SelectedDate="{Binding StartDate, RelativeSource={RelativeSource AncestorType=UserControl}, Mode=TwoWay}"/>
							<TextBlock Text="—" Margin="8,0" VerticalAlignment="Center"/>
							<DatePicker SelectedDate="{Binding EndDate, RelativeSource={RelativeSource AncestorType=UserControl}, Mode=TwoWay}"/>
							<Button Content="OK" Margin="8,0,0,0" Click="ClosePopup_Click"/>
						</StackPanel>
					</StackPanel>
				</Border>
			</Popup>

			<!-- Segment Dzień / Miesiąc / Kwartał / Rok -->
			<StackPanel Grid.Column="2" Orientation="Horizontal" Margin="6,0,0,0">
				<RadioButton Content="Dzień"   GroupName="mode" Style="{StaticResource ChipToggle}"
                             Tag="Day"     Checked="Mode_Checked"/>
				<RadioButton Content="Miesiąc" GroupName="mode" Style="{StaticResource ChipToggle}"
                             Tag="Month"   Checked="Mode_Checked"/>
				<RadioButton Content="Kwartał" GroupName="mode" Style="{StaticResource ChipToggle}"
                             Tag="Quarter" Checked="Mode_Checked"/>
				<RadioButton Content="Rok"     GroupName="mode" Style="{StaticResource ChipToggle}"
                             Tag="Year"    Checked="Mode_Checked"/>
			</StackPanel>

			<!-- ▶︎ -->
			<Button Grid.Column="2" Click="Next_Click"
                    Background="#22FFFFFF" Foreground="White" BorderBrush="{x:Null}"
                    Padding="12,6" HorizontalAlignment="Right">
				<TextBlock Text="▶" FontSize="14"/>
			</Button>
		</Grid>
	</Border>
</UserControl>

