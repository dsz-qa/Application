<UserControl x:Class="Finly.Pages.TransactionsPage"
 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
 xmlns:ctrls="clr-namespace:Finly.Views.Controls"
 xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
 xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
 mc:Ignorable="d">
 <UserControl.Resources>
 <BooleanToVisibilityConverter x:Key="BoolToVisibilityConverter"/>

 <!-- KPI styles -->
 <Style x:Key="KpiValueStyle" TargetType="TextBlock">
 <Setter Property="FontSize" Value="18"/>
 <Setter Property="FontWeight" Value="Bold"/>
 <Setter Property="Margin" Value="0,2,0,0"/>
 <Setter Property="Foreground" Value="{DynamicResource App.Foreground}"/>
 </Style>
 <Style x:Key="KpiHeader" TargetType="TextBlock">
 <Setter Property="FontSize" Value="20"/>
 <Setter Property="FontWeight" Value="Bold"/>
 <Setter Property="Foreground" Value="{DynamicResource App.Foreground}"/>
 <Setter Property="Opacity" Value="1"/>
 </Style>

 <!-- Accent card -->
 <Style x:Key="AccentCard" TargetType="Border">
 <Setter Property="Background" Value="Transparent"/>
 <Setter Property="BorderBrush" Value="{DynamicResource Brand.Blue}"/>
 <Setter Property="BorderThickness" Value="2"/>
 <Setter Property="CornerRadius" Value="10"/>
 <Setter Property="Padding" Value="12"/>
 <Setter Property="Margin" Value="0,0,16,0"/>
 </Style>

 <!-- Transaction cards -->
 <Style x:Key="TransactionCard" TargetType="Border">
 <Setter Property="Background" Value="{DynamicResource Surface.Background}"/>
 <Setter Property="BorderBrush" Value="{DynamicResource Surface.Border}"/>
 <Setter Property="BorderThickness" Value="1"/>
 <Setter Property="CornerRadius" Value="10"/>
 <Setter Property="Padding" Value="12"/>
 <Setter Property="Margin" Value="0,0,16,12"/>
 <Setter Property="SnapsToDevicePixels" Value="True"/>
 <Setter Property="Effect">
 <Setter.Value>
 <DropShadowEffect BlurRadius="8" ShadowDepth="2" Opacity="0.16"/>
 </Setter.Value>
 </Setter>
 <Style.Triggers>
 <Trigger Property="IsMouseOver" Value="True">
 <!-- Neutral hover, no blue/orange -->
 <Setter Property="BorderBrush" Value="{DynamicResource Surface.Border}"/>
 </Trigger>
 </Style.Triggers>
 </Style>

 <Style x:Key="TransactionCardPlanned" TargetType="Border" BasedOn="{StaticResource TransactionCard}">
 <Style.Triggers>
 <DataTrigger Binding="{Binding IsPlanned}" Value="True">
 <Setter Property="Opacity" Value="0.85"/>
 </DataTrigger>
 </Style.Triggers>
 </Style>

 <Style x:Key="PlannedLabelStyle" TargetType="TextBlock">
 <Setter Property="Foreground" Value="{DynamicResource App.Foreground}"/>
 <Setter Property="Opacity" Value="0.7"/>
 <Setter Property="FontSize" Value="12"/>
 <Setter Property="FontWeight" Value="SemiBold"/>
 </Style>

 <!-- Period option -->
 <Style x:Key="PeriodOptionStyle" TargetType="RadioButton">
 <Setter Property="Foreground" Value="{DynamicResource App.Foreground}"/>
 <Setter Property="FontSize" Value="13"/>
 <Setter Property="FontWeight" Value="SemiBold"/>
 <Setter Property="Margin" Value="0,0,12,0"/>
 <Setter Property="Padding" Value="14,6"/>
 <Setter Property="Cursor" Value="Hand"/>
 </Style>

 <!-- Filter checkbox style -->
 <Style x:Key="FilterCheckBoxStyle" TargetType="CheckBox">
 <Setter Property="FontSize" Value="15"/>
 <Setter Property="FontWeight" Value="SemiBold"/>
 <Setter Property="Foreground" Value="{DynamicResource App.Foreground}"/>
 <Setter Property="Cursor" Value="Hand"/>
 <Setter Property="Padding" Value="8,6"/>
 <Setter Property="Margin" Value="0,4,0,4"/>
 <Setter Property="MinHeight" Value="32"/>
 <Setter Property="VerticalContentAlignment" Value="Center"/>
 <Setter Property="HorizontalContentAlignment" Value="Left"/>
 <Setter Property="Template">
 <Setter.Value>
 <ControlTemplate TargetType="CheckBox">
 <Grid>
 <Grid.ColumnDefinitions>
 <ColumnDefinition Width="Auto"/>
 <ColumnDefinition Width="*"/>
 </Grid.ColumnDefinitions>
 <Border x:Name="Box"
 Width="18" Height="18"
 CornerRadius="3"
 Background="{DynamicResource Surface.Background}"
 BorderBrush="{DynamicResource Surface.Border}"
 BorderThickness="1"
 VerticalAlignment="Center"
 Margin="0,0,8,0"/>
 <Path x:Name="CheckGlyph"
 Data="M4,9 L7,12 L14,5"
 Stroke="{DynamicResource App.Foreground}"
 StrokeThickness="2.2"
 StrokeLineJoin="Round"
 StrokeStartLineCap="Round"
 StrokeEndLineCap="Round"
 Visibility="Collapsed"
 HorizontalAlignment="Left"
 VerticalAlignment="Center"
 Margin="2,0,0,0"/>
 <ContentPresenter Grid.Column="1"
 VerticalAlignment="Center"
 HorizontalAlignment="Left"
 RecognizesAccessKey="True"/>
 </Grid>
 <ControlTemplate.Triggers>
 <Trigger Property="IsChecked" Value="True">
 <Setter TargetName="CheckGlyph" Property="Visibility" Value="Visible"/>
 <Setter TargetName="Box" Property="Background" Value="{DynamicResource Accent}"/>
 <Setter TargetName="Box" Property="BorderBrush" Value="{DynamicResource Accent}"/>
 </Trigger>
 <Trigger Property="IsMouseOver" Value="True">
 <Setter TargetName="Box" Property="Background" Value="{DynamicResource Btn.Hover}"/>
 <Setter TargetName="Box" Property="BorderBrush" Value="{DynamicResource Btn.Border}"/>
 </Trigger>
 <Trigger Property="IsEnabled" Value="False">
 <Setter TargetName="Box" Property="Opacity" Value="0.5"/>
 <Setter Property="Foreground" Value="{DynamicResource App.Foreground}"/>
 </Trigger>
 </ControlTemplate.Triggers>
 </ControlTemplate>
 </Setter.Value>
 </Setter>
 </Style>

 <!-- Filter panel with fixed height (content scrolls inside) -->
 <Style x:Key="FilterPanelStyle" TargetType="GroupBox">
 <Setter Property="Height" Value="220"/>
 <Setter Property="MinHeight" Value="220"/>
 <Setter Property="Margin" Value="0,0,16,0"/>
 <Setter Property="Foreground" Value="{DynamicResource App.Foreground}"/>
 <Setter Property="Background" Value="Transparent"/>
 <!-- Neutralize small frame color inside orange wrapper -->
 <Setter Property="BorderBrush" Value="{DynamicResource Surface.Border}"/>
 <Setter Property="BorderThickness" Value="2"/>
 <Setter Property="Template">
 <Setter.Value>
 <ControlTemplate TargetType="GroupBox">
 <Grid Height="{TemplateBinding Height}" ClipToBounds="True">
 <Grid.RowDefinitions>
 <RowDefinition Height="Auto"/>
 <RowDefinition Height="*"/>
 </Grid.RowDefinitions>
 <TextBlock Grid.Row="0" Text="{TemplateBinding Header}" FontWeight="Bold" FontSize="16" Foreground="{DynamicResource App.Foreground}" Margin="0,0,0,6"/>
 <Border Grid.Row="1" Background="{DynamicResource Surface.Background}" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" CornerRadius="10" Padding="10" SnapsToDevicePixels="True">
 <ContentPresenter VerticalAlignment="Stretch" HorizontalAlignment="Stretch"/>
 </Border>
 </Grid>
 </ControlTemplate>
 </Setter.Value>
 </Setter>
 </Style>
 </UserControl.Resources>

 <!-- Page-level scrollviewer -->
 <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled" PanningMode="VerticalOnly">
 <Grid>
 <Grid.RowDefinitions>
 <RowDefinition Height="Auto"/>
 <RowDefinition Height="Auto"/>
 <RowDefinition Height="*"/>
 </Grid.RowDefinitions>

 <!-- KPI row (leave as-is) -->
 <Grid Grid.Row="0" Margin="16">
 <Grid.ColumnDefinitions>
 <ColumnDefinition Width="*"/>
 <ColumnDefinition Width="*"/>
 <ColumnDefinition Width="*"/>
 </Grid.ColumnDefinitions>
 <Border Grid.Column="0" Style="{StaticResource AccentCard}">
 <StackPanel>
 <TextBlock Text="Suma wydatków" Style="{StaticResource KpiHeader}"/>
 <TextBlock Text="{Binding TotalExpenses, StringFormat={}{0:N2} zł}" Style="{StaticResource KpiValueStyle}"/>
 </StackPanel>
 </Border>
 <Border Grid.Column="1" Style="{StaticResource AccentCard}">
 <StackPanel>
 <TextBlock Text="Suma przychodów" Style="{StaticResource KpiHeader}"/>
 <TextBlock Text="{Binding TotalIncomes, StringFormat={}{0:N2} zł}" Style="{StaticResource KpiValueStyle}"/>
 </StackPanel>
 </Border>
 <Border Grid.Column="2" Style="{StaticResource AccentCard}">
 <StackPanel>
 <TextBlock Text="Bilans" Style="{StaticResource KpiHeader}"/>
 <TextBlock Text="{Binding Balance, StringFormat={}{0:N2} zł}" Style="{StaticResource KpiValueStyle}"/>
 </StackPanel>
 </Border>
 </Grid>

 <!-- Filters now ABOVE period bar with orange separator below -->
 <StackPanel Grid.Row="1" Margin="16,0,16,12" Orientation="Vertical">
 <Grid>
 <Grid.ColumnDefinitions>
 <ColumnDefinition Width="*"/>
 <ColumnDefinition Width="*"/>
 <ColumnDefinition Width="*"/>
 </Grid.ColumnDefinitions>
 <GroupBox Style="{StaticResource FilterPanelStyle}" Grid.Column="0" Header="Typ transakcji">
 <ScrollViewer VerticalScrollBarVisibility="Auto">
 <StackPanel>
 <CheckBox Style="{StaticResource FilterCheckBoxStyle}" Content="Wydatki" IsChecked="{Binding ShowExpenses, Mode=TwoWay}"/>
 <CheckBox Style="{StaticResource FilterCheckBoxStyle}" Content="Przychody" IsChecked="{Binding ShowIncomes, Mode=TwoWay}"/>
 <CheckBox Style="{StaticResource FilterCheckBoxStyle}" Content="Transfery" IsChecked="{Binding ShowTransfers, Mode=TwoWay}"/>
 </StackPanel>
 </ScrollViewer>
 </GroupBox>
 <GroupBox Style="{StaticResource FilterPanelStyle}" Grid.Column="1" Header="Kategorie">
 <ScrollViewer VerticalScrollBarVisibility="Auto">
 <ItemsControl ItemsSource="{Binding Categories}">
 <ItemsControl.ItemTemplate>
 <DataTemplate>
 <CheckBox Style="{StaticResource FilterCheckBoxStyle}" Content="{Binding Name}" IsChecked="{Binding IsSelected, Mode=TwoWay}"/>
 </DataTemplate>
 </ItemsControl.ItemTemplate>
 </ItemsControl>
 </ScrollViewer>
 </GroupBox>
 <GroupBox Style="{StaticResource FilterPanelStyle}" Grid.Column="2" Header="Konta">
 <ScrollViewer VerticalScrollBarVisibility="Auto">
 <ItemsControl ItemsSource="{Binding Accounts}">
 <ItemsControl.ItemTemplate>
 <DataTemplate>
 <CheckBox Style="{StaticResource FilterCheckBoxStyle}" Content="{Binding Name}" IsChecked="{Binding IsSelected, Mode=TwoWay}"/>
 </DataTemplate>
 </ItemsControl.ItemTemplate>
 </ItemsControl>
 </ScrollViewer>
 </GroupBox>
 </Grid>
 <Border Height="2" Background="{DynamicResource Brand.Orange}" CornerRadius="0,0,8,8" Margin="0,8,0,0"/>
 </StackPanel>

 <!-- Unified wrapper like Dashboard: PeriodBar + Transactions + Planned -->
 <Border Grid.Row="2" Margin="16" BorderBrush="{DynamicResource Surface.Border}" BorderThickness="1" CornerRadius="10" Padding="16">
 <Grid>
 <Grid.RowDefinitions>
 <RowDefinition Height="Auto"/>
 <RowDefinition Height="Auto"/>
 <RowDefinition Height="Auto"/>
 <RowDefinition Height="Auto"/>
 </Grid.RowDefinitions>
 <Grid.ColumnDefinitions>
 <ColumnDefinition Width="*"/>
 <ColumnDefinition Width="*"/>
 </Grid.ColumnDefinitions>

 <!-- Period bar with BLUE separator below -->
 <StackPanel Grid.Row="0" Grid.ColumnSpan="2" Margin="0,0,0,12">
 <ctrls:PeriodBarControl x:Name="PeriodBar" RangeChanged="PeriodBar_RangeChanged"/>
 <Border Height="3" Background="{DynamicResource Brand.Blue}" CornerRadius="0,0,8,8" Margin="0,6,0,0"/>
 </StackPanel>

 <!-- Realized Transactions -->
 <Border Grid.Row="2" Grid.Column="0" BorderBrush="{DynamicResource Surface.Border}" BorderThickness="1" CornerRadius="10" Padding="12" Margin="0,0,8,0">
 <Grid>
 <Grid.RowDefinitions>
 <RowDefinition Height="Auto"/>
 <RowDefinition Height="Auto"/>
 </Grid.RowDefinitions>
 <TextBlock Grid.Row="0" Text="Transakcje" Style="{StaticResource KpiHeader}" Margin="0,0,0,8"/>

 <Grid Grid.Row="1">
 <!-- Placeholder for empty "Transakcje" -->
 <TextBlock Text="Brak danych w tym okresie" Foreground="{DynamicResource App.Foreground}" FontStyle="Italic" HorizontalAlignment="Center" Margin="0,8,0,8">
 <TextBlock.Style>
 <Style TargetType="TextBlock">
 <Setter Property="Visibility" Value="Collapsed"/>
 <Style.Triggers>
 <DataTrigger Binding="{Binding ElementName=RealizedItems, Path=HasItems}" Value="False">
 <Setter Property="Visibility" Value="Visible"/>
 </DataTrigger>
 </Style.Triggers>
 </Style>
 </TextBlock.Style>
 </TextBlock>

 <!-- Items list -->
 <ItemsControl x:Name="RealizedItems" ItemsSource="{Binding FilteredTransactions}">
 <ItemsControl.ItemTemplate>
 <DataTemplate>
 <Border x:Name="RealizedCard" Style="{StaticResource TransactionCardPlanned}">
 <Grid>
 <Grid.ColumnDefinitions>
 <ColumnDefinition Width="*"/>
 <ColumnDefinition Width="Auto"/>
 </Grid.ColumnDefinitions>
 <StackPanel Grid.Column="0" Margin="4,0,8,0" Orientation="Vertical">
 <StackPanel Orientation="Horizontal">
 <TextBlock Text="Data:" FontWeight="SemiBold" Foreground="{DynamicResource App.Foreground}" Margin="0,0,6,0"/>
 <TextBlock Text="{Binding DateDisplay}" Foreground="{DynamicResource App.Foreground}"/>
 </StackPanel>
 <StackPanel Orientation="Horizontal">
 <TextBlock Text="Kwota:" FontWeight="SemiBold" Foreground="{DynamicResource App.Foreground}" Margin="0,0,6,0"/>
 <TextBlock Text="{Binding AmountStr}" Foreground="{DynamicResource App.Foreground}"/>
 </StackPanel>
 <StackPanel Orientation="Horizontal">
 <TextBlock Text="Kategoria:" FontWeight="SemiBold" Foreground="{DynamicResource App.Foreground}" Margin="0,0,6,0"/>
 <TextBlock>
 <TextBlock.Text>
 <Binding Path="CategoryName" FallbackValue="Brak kategorii" TargetNullValue="Brak kategorii"/>
 </TextBlock.Text>
 </TextBlock>
 </StackPanel>
 <StackPanel Orientation="Horizontal" Visibility="Collapsed" x:Name="FromLine">
 <TextBlock Text="Z konta:" FontWeight="SemiBold" Foreground="{DynamicResource App.Foreground}" Margin="0,0,6,0"/>
 <TextBlock>
 <TextBlock.Text>
 <Binding Path="AccountName" FallbackValue="Nie dotyczy" TargetNullValue="Nie dotyczy"/>
 </TextBlock.Text>
 </TextBlock>
 </StackPanel>
 <StackPanel Orientation="Horizontal" Visibility="Collapsed" x:Name="ToLine">
 <TextBlock Text="Na konto:" FontWeight="SemiBold" Foreground="{DynamicResource App.Foreground}" Margin="0,0,6,0"/>
 <TextBlock>
 <TextBlock.Text>
 <Binding Path="AccountName" FallbackValue="Nie dotyczy" TargetNullValue="Nie dotyczy"/>
 </TextBlock.Text>
 </TextBlock>
 </StackPanel>
 <StackPanel Orientation="Horizontal">
 <TextBlock Text="Opis:" FontWeight="SemiBold" Foreground="{DynamicResource App.Foreground}" Margin="0,0,6,0"/>
 <TextBlock>
 <TextBlock.Text>
 <Binding Path="Description" FallbackValue="Brak danych" TargetNullValue="Brak danych"/>
 </TextBlock.Text>
 </TextBlock>
 <TextBlock Text="Zaplanowana" Margin="8,0,0,0" Visibility="{Binding IsPlanned, Converter={StaticResource BoolToVisibilityConverter}}" Style="{StaticResource PlannedLabelStyle}"/>
 </StackPanel>
 </StackPanel>
 <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Top">
 <Button Style="{StaticResource TitleBarIconButton}" Margin="0,0,6,0" ToolTip="Edytuj">
 <Image Source="/Assets/Images/edit.png" Width="20" Height="20" Stretch="Uniform"/>
 </Button>
 <Button Style="{StaticResource TitleBarIconButton}" ToolTip="Usuń">
 <Image Source="/Assets/Images/delete.png" Width="20" Height="20" Stretch="Uniform"/>
 </Button>
 </StackPanel>
 </Grid>
 </Border>
 <DataTemplate.Triggers>
 <DataTrigger Binding="{Binding Kind}" Value="Expense">
 <Setter TargetName="FromLine" Property="Visibility" Value="Visible"/>
 </DataTrigger>
 <DataTrigger Binding="{Binding Kind}" Value="Income">
 <Setter TargetName="ToLine" Property="Visibility" Value="Visible"/>
 </DataTrigger>
 <DataTrigger Binding="{Binding Kind}" Value="Transfer">
 <Setter TargetName="FromLine" Property="Visibility" Value="Visible"/>
 <Setter TargetName="ToLine" Property="Visibility" Value="Visible"/>
 </DataTrigger>
 <!-- Hide realized when planned/future -->
 <DataTrigger Binding="{Binding IsPlanned}" Value="True">
 <Setter TargetName="RealizedCard" Property="Visibility" Value="Collapsed"/>
 </DataTrigger>
 <DataTrigger Binding="{Binding IsFuture}" Value="True">
 <Setter TargetName="RealizedCard" Property="Visibility" Value="Collapsed"/>
 </DataTrigger>
 </DataTemplate.Triggers>
 </DataTemplate>
 </ItemsControl.ItemTemplate>
 </ItemsControl>
 </Grid>
 </Grid>
 </Border>

 <!-- Scheduled Transactions -->
 <Border Grid.Row="2" Grid.Column="1" BorderBrush="{DynamicResource Surface.Border}" BorderThickness="1" CornerRadius="10" Padding="12" Margin="8,0,0,0" Visibility="{Binding ShowScheduled, Converter={StaticResource BoolToVisibilityConverter}}">
 <Grid>
 <Grid.RowDefinitions>
 <RowDefinition Height="Auto"/>
 <RowDefinition Height="Auto"/>
 </Grid.RowDefinitions>
 <TextBlock Grid.Row="0" Text="Zaplanowane transakcje" Style="{StaticResource KpiHeader}" Margin="0,0,0,8"/>

 <Grid Grid.Row="1">
 <!-- Placeholder for empty "Zaplanowane transakcje" -->
 <TextBlock Text="Brak danych w tym okresie" Foreground="{DynamicResource App.Foreground}" FontStyle="Italic" HorizontalAlignment="Center" Margin="0,8,0,8">
 <TextBlock.Style>
 <Style TargetType="TextBlock">
 <Setter Property="Visibility" Value="Collapsed"/>
 <Style.Triggers>
 <DataTrigger Binding="{Binding ElementName=PlannedItems, Path=HasItems}" Value="False">
 <Setter Property="Visibility" Value="Visible"/>
 </DataTrigger>
 </Style.Triggers>
 </Style>
 </TextBlock.Style>
 </TextBlock>

 <!-- Items list -->
 <ItemsControl x:Name="PlannedItems" ItemsSource="{Binding PlannedTransactions}">
 <ItemsControl.ItemTemplate>
 <DataTemplate>
 <Border x:Name="ScheduledCard" Style="{StaticResource TransactionCardPlanned}">
 <Grid>
 <Grid.ColumnDefinitions>
 <ColumnDefinition Width="*"/>
 <ColumnDefinition Width="Auto"/>
 </Grid.ColumnDefinitions>
 <StackPanel Grid.Column="0" Margin="4,0,8,0" Orientation="Vertical">
 <StackPanel Orientation="Horizontal">
 <TextBlock Text="Data:" FontWeight="SemiBold" Foreground="{DynamicResource App.Foreground}" Margin="0,0,6,0"/>
 <TextBlock Text="{Binding DateDisplay}" Foreground="{DynamicResource App.Foreground}"/>
 </StackPanel>
 <StackPanel Orientation="Horizontal">
 <TextBlock Text="Kwota:" FontWeight="SemiBold" Foreground="{DynamicResource App.Foreground}" Margin="0,0,6,0"/>
 <TextBlock Text="{Binding AmountStr}" Foreground="{DynamicResource App.Foreground}"/>
 </StackPanel>
 <StackPanel Orientation="Horizontal">
 <TextBlock Text="Kategoria:" FontWeight="SemiBold" Foreground="{DynamicResource App.Foreground}" Margin="0,0,6,0"/>
 <TextBlock>
 <TextBlock.Text>
 <Binding Path="CategoryName" FallbackValue="Brak kategorii" TargetNullValue="Brak kategorii"/>
 </TextBlock.Text>
 </TextBlock>
 </StackPanel>
 <StackPanel Orientation="Horizontal" Visibility="Collapsed" x:Name="SchedFromLine">
 <TextBlock Text="Z konta:" FontWeight="SemiBold" Foreground="{DynamicResource App.Foreground}" Margin="0,0,6,0"/>
 <TextBlock>
 <TextBlock.Text>
 <Binding Path="AccountName" FallbackValue="Nie dotyczy" TargetNullValue="Nie dotyczy"/>
 </TextBlock.Text>
 </TextBlock>
 </StackPanel>
 <StackPanel Orientation="Horizontal" Visibility="Collapsed" x:Name="SchedToLine">
 <TextBlock Text="Na konto:" FontWeight="SemiBold" Foreground="{DynamicResource App.Foreground}" Margin="0,0,6,0"/>
 <TextBlock>
 <TextBlock.Text>
 <Binding Path="AccountName" FallbackValue="Nie dotyczy" TargetNullValue="Nie dotyczy"/>
 </TextBlock.Text>
 </TextBlock>
 </StackPanel>
 <StackPanel Orientation="Horizontal">
 <TextBlock Text="Opis:" FontWeight="SemiBold" Foreground="{DynamicResource App.Foreground}" Margin="0,0,6,0"/>
 <TextBlock>
 <TextBlock.Text>
 <Binding Path="Description" FallbackValue="Brak danych" TargetNullValue="Brak danych"/>
 </TextBlock.Text>
 </TextBlock>
 </StackPanel>
 </StackPanel>
 <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Top">
 <Button Style="{StaticResource TitleBarIconButton}" Margin="0,0,6,0" ToolTip="Edytuj">
 <Image Source="/Assets/Images/edit.png" Width="20" Height="20" Stretch="Uniform"/>
 </Button>
 <Button Style="{StaticResource TitleBarIconButton}" ToolTip="Usuń">
 <Image Source="/Assets/Images/delete.png" Width="20" Height="20" Stretch="Uniform"/>
 </Button>
 </StackPanel>
 </Grid>
 </Border>
 <DataTemplate.Triggers>
 <DataTrigger Binding="{Binding Kind}" Value="Expense">
 <Setter TargetName="SchedFromLine" Property="Visibility" Value="Visible"/>
 </DataTrigger>
 <DataTrigger Binding="{Binding Kind}" Value="Income">
 <Setter TargetName="SchedToLine" Property="Visibility" Value="Visible"/>
 </DataTrigger>
 <DataTrigger Binding="{Binding Kind}" Value="Transfer">
 <Setter TargetName="SchedFromLine" Property="Visibility" Value="Visible"/>
 <Setter TargetName="SchedToLine" Property="Visibility" Value="Visible"/>
 </DataTrigger>
 <MultiDataTrigger>
 <MultiDataTrigger.Conditions>
 <Condition Binding="{Binding IsPlanned}" Value="False"/>
 <Condition Binding="{Binding IsFuture}" Value="False"/>
 </MultiDataTrigger.Conditions>
 <Setter TargetName="ScheduledCard" Property="Visibility" Value="Collapsed"/>
 </MultiDataTrigger>
 </DataTemplate.Triggers>
 </DataTemplate>
 </ItemsControl.ItemTemplate>
 </ItemsControl>
 </Grid>
 </Grid>
 </Border>
 </Grid>
 </Border>
 </Grid>
 </ScrollViewer>
</UserControl>










































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































