<UserControl x:Class="Finly.Pages.CategoriesPage"
 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
 xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
 xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
 xmlns:ctrls="clr-namespace:Finly.Views.Controls"
 mc:Ignorable="d">

 <UserControl.Resources>
 <!-- Watermark / placeholder dla TextBox -->
 <Style x:Key="WatermarkTextBoxStyle" TargetType="TextBox">
 <Setter Property="Foreground" Value="White"/>
 <Setter Property="Template">
 <Setter.Value>
 <ControlTemplate TargetType="TextBox">
 <Grid>
 <ScrollViewer x:Name="PART_ContentHost"/>
 <TextBlock x:Name="Watermark"
 Text="{TemplateBinding Tag}"
 Foreground="#666"
 Margin="6,0,0,0"
 VerticalAlignment="Center"
 IsHitTestVisible="False"
 Visibility="Collapsed"/>
 </Grid>
 <ControlTemplate.Triggers>
 <Trigger Property="Text" Value="">
 <Setter TargetName="Watermark" Property="Visibility" Value="Visible"/>
 </Trigger>
 <Trigger Property="IsFocused" Value="True">
 <Setter TargetName="Watermark" Property="Visibility" Value="Collapsed"/>
 </Trigger>
 </ControlTemplate.Triggers>
 </ControlTemplate>
 </Setter.Value>
 </Setter>
 </Style>

 <!-- Style KPI spójne z Dashboard -->
 <Style x:Key="KpiCard" TargetType="Border">
 <Setter Property="Background" Value="Transparent"/>
 <Setter Property="BorderBrush" Value="{DynamicResource Brand.Blue}"/>
 <Setter Property="BorderThickness" Value="2"/>
 <Setter Property="CornerRadius" Value="10"/>
 <Setter Property="Padding" Value="12"/>
 <Setter Property="Margin" Value="0,0,16,0"/>
 </Style>
 <Style x:Key="KpiHeader" TargetType="TextBlock">
 <Setter Property="FontSize" Value="16"/>
 <Setter Property="FontWeight" Value="Bold"/>
 <Setter Property="Foreground" Value="White"/>
 </Style>
 <Style x:Key="KpiValueStyle" TargetType="TextBlock">
 <Setter Property="FontSize" Value="18"/>
 <Setter Property="FontWeight" Value="Bold"/>
 <Setter Property="Foreground" Value="{DynamicResource App.Foreground}"/>
 </Style>
 </UserControl.Resources>

 <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
 <Grid Margin="16">
 <Grid.RowDefinitions>
 <RowDefinition Height="Auto"/>
 <RowDefinition Height="Auto"/>
 <RowDefinition Height="Auto"/>
 <RowDefinition Height="*"/> <!-- szczegóły -->
 </Grid.RowDefinitions>

 <!--1) KPI: pełna szerokość, trzy kolumny -->
 <Grid Grid.Row="0" Margin="0,0,0,12">
 <Grid.ColumnDefinitions>
 <ColumnDefinition Width="*"/>
 <ColumnDefinition Width="*"/>
 <ColumnDefinition Width="*"/>
 </Grid.ColumnDefinitions>

 <!-- Najczęściej używana -->
 <Border Grid.Column="0" Style="{StaticResource KpiCard}">
 <StackPanel>
 <TextBlock Text="Najczęściej używana kategoria w tym okresie" Style="{StaticResource KpiHeader}" TextWrapping="Wrap"/>
 <StackPanel Orientation="Horizontal" Margin="0,6,0,0" VerticalAlignment="Center">
 <Rectangle x:Name="MostUsedColorRect" Width="14" Height="14" RadiusX="3" RadiusY="3" Margin="0,0,6,0"/>
 <TextBlock x:Name="MostUsedCategoryNameText" Style="{StaticResource KpiValueStyle}" Text="Brak danych dla wybranego okresu"/>
 </StackPanel>
 <TextBlock x:Name="MostUsedCountText" Foreground="{DynamicResource App.Foreground}" Opacity="0.85"/>
 </StackPanel>
 </Border>

 <!-- Najdroższa -->
 <Border Grid.Column="1" Style="{StaticResource KpiCard}">
 <StackPanel>
 <TextBlock Text="Najdroższa kategoria w tym okresie" Style="{StaticResource KpiHeader}" TextWrapping="Wrap"/>
 <TextBlock x:Name="MostExpensiveNameText" Style="{StaticResource KpiValueStyle}" Text="Brak danych dla wybranego okresu"/>
 <TextBlock x:Name="MostExpensiveAmountText" Foreground="{DynamicResource App.Foreground}" Margin="0,2,0,0"/>
 <StackPanel Orientation="Horizontal" VerticalAlignment="Center" Margin="0,6,0,0">
 <ProgressBar x:Name="MostExpensivePercentBar" Minimum="0" Maximum="100" Height="10" Width="140"/>
 <TextBlock x:Name="MostExpensivePercentText" Margin="8,0,0,0" Foreground="{DynamicResource App.Foreground}"/>
 </StackPanel>
 </StackPanel>
 </Border>

 <!-- Twoje kategorie -->
 <Border Grid.Column="2" Style="{StaticResource KpiCard}">
 <StackPanel>
 <TextBlock Text="Twoje kategorie" Style="{StaticResource KpiHeader}"/>
 <StackPanel Orientation="Horizontal" Margin="0,6,0,0">
 <StackPanel>
 <TextBlock Text="Łącznie" Foreground="{DynamicResource App.Foreground}"/>
 <TextBlock x:Name="TotalCategoriesText" Style="{StaticResource KpiValueStyle}" Text="0"/>
 </StackPanel>
 <StackPanel Margin="16,0,0,0">
 <TextBlock Text="Aktywne (w okresie)" Foreground="{DynamicResource App.Foreground}"/>
 <TextBlock x:Name="ActiveCategoriesText" Style="{StaticResource KpiValueStyle}" Text="0"/>
 </StackPanel>
 <StackPanel Margin="16,0,0,0">
 <TextBlock Text="Nieużywane" Foreground="{DynamicResource App.Foreground}"/>
 <TextBlock x:Name="InactiveCategoriesText" Style="{StaticResource KpiValueStyle}" Text="0"/>
 </StackPanel>
 </StackPanel>
 </StackPanel>
 </Border>
 </Grid>

 <!--2) Sekcja: Wszystkie Kategorie (PRZENIESIONA NAD PASEK OKRESU) -->
 <Border Grid.Row="1"
 Padding="12"
 Background="{DynamicResource Surface.Background}"
 BorderBrush="{DynamicResource Brand.Orange}"
 BorderThickness="1"
 CornerRadius="8"
 Margin="0,0,0,12">
 <Grid>
 <Grid.RowDefinitions>
 <RowDefinition Height="Auto"/>
 <RowDefinition Height="Auto"/>
 <RowDefinition Height="Auto"/>
 <RowDefinition Height="*"/>
 <RowDefinition Height="Auto"/> <!-- edit panel -->
 </Grid.RowDefinitions>

 <TextBlock Text="Wszystkie Kategorie" FontSize="22" FontWeight="Bold" Foreground="{DynamicResource App.Foreground}" Margin="0,0,0,12"/>

 <!-- Wyszukiwarka: ikona przed polem -->
 <DockPanel Grid.Row="1" Margin="0,0,0,8" LastChildFill="True">
 <Image Source="pack://application:,,,/Assets/Icons/search.png" Width="16" Height="16" VerticalAlignment="Center" Margin="0,0,6,0"/>
 <TextBox x:Name="SearchBox"
 Height="28"
 VerticalAlignment="Top"
 TextChanged="SearchBox_TextChanged"
 MinWidth="220"
 Tag="Szukaj"
 Style="{StaticResource WatermarkTextBoxStyle}"/>
 </DockPanel>

 <!-- Dodawanie kategorii: etykieta, pole, przycisk pod polem -->
 <StackPanel Grid.Row="2" Orientation="Vertical" Margin="0,0,0,8">
 <TextBlock Text="Dodaj kategorię" FontWeight="SemiBold" Foreground="{DynamicResource App.Foreground}"/>
 <TextBox x:Name="NewCategoryBox" Height="28" Width="320"/>
 <Button Content="Dodaj" Width="120" Margin="0,6,0,0" Click="AddCategory_Click"/>
 <TextBlock x:Name="MessageText" Margin="0,8,0,0" Foreground="OrangeRed" TextWrapping="Wrap"/>
 </StackPanel>

 <!-- Lista kategorii jako kafelki -->
 <ScrollViewer Grid.Row="3" VerticalScrollBarVisibility="Auto">
 <ItemsControl x:Name="CategoriesList">
 <ItemsControl.ItemsPanel>
 <ItemsPanelTemplate>
 <WrapPanel />
 </ItemsPanelTemplate>
 </ItemsControl.ItemsPanel>
 <ItemsControl.ItemTemplate>
 <DataTemplate>
 <Border MinWidth="180" MinHeight="120" Margin="8" Padding="8"
 Background="{DynamicResource Surface.Background}"
 BorderBrush="{DynamicResource Surface.Border}" BorderThickness="1" CornerRadius="10">
 <Grid>
 <Grid.RowDefinitions>
 <RowDefinition Height="Auto"/>
 <RowDefinition Height="*"/>
 <RowDefinition Height="Auto"/>
 </Grid.RowDefinitions>

 <!-- Header: color square + icon + name -->
 <StackPanel Orientation="Horizontal">
 <Rectangle Width="14" Height="14" RadiusX="3" RadiusY="3" Fill="{Binding ColorBrush}" Margin="0,0,6,0"/>
 <TextBlock Text="{Binding Icon}" FontSize="16" Margin="0,0,6,0"/>
 <TextBlock Text="{Binding Name}" FontSize="16" FontWeight="SemiBold" Foreground="{DynamicResource App.Foreground}"/>
 </StackPanel>

 <!-- spacer -->
 <Grid Grid.Row="1"/>

 <!-- Footer: actions -->
 <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right">
 <Button Tag="{Binding}" Click="EditCategory_Click" Width="28" Height="28" Padding="0" Margin="0,0,6,0" ToolTip="Edytuj">
 <TextBlock FontFamily="Segoe MDL2 Assets" Text="&#xE70F;" FontSize="14" Foreground="{DynamicResource Brand.Blue}"/>
 </Button>
 <Button Tag="{Binding}" Click="ShowDeleteConfirm_Click" Width="28" Height="28" Padding="0" ToolTip="Usuń">
 <TextBlock FontFamily="Segoe MDL2 Assets" Text="&#xE74D;" FontSize="14" Foreground="Red"/>
 </Button>
 </StackPanel>
 </Grid>
 </Border>
 </DataTemplate>
 </ItemsControl.ItemTemplate>
 </ItemsControl>
 </ScrollViewer>

 <!-- Panel edycji (połączony: nazwa + opis + kolor) -->
 <Border Grid.Row="4" x:Name="EditPanel" Background="{DynamicResource Surface.Background}" BorderBrush="{DynamicResource Surface.Border}" BorderThickness="1" CornerRadius="6" Padding="12" Margin="0,8,0,0" Visibility="Collapsed">
 <StackPanel>
 <TextBlock Text="{Binding Name, StringFormat=Edytujesz kategorię: {0}}" FontWeight="Bold" Foreground="{DynamicResource App.Foreground}" FontSize="16"/>

 <!-- Nazwa -->
 <TextBlock Text="Nazwa" Margin="0,10,0,4" Foreground="{DynamicResource App.Foreground}"/>
 <TextBox x:Name="EditNameBox" Width="360" Height="28"/>

 <!-- Opis -->
 <TextBlock Text="Opis kategorii" Margin="0,10,0,4" Foreground="{DynamicResource App.Foreground}"/>
 <TextBox x:Name="EditDescriptionBox" Height="80" TextWrapping="Wrap" AcceptsReturn="True"/>

 <!-- Kolor -->
 <TextBlock Text="Kolor kategorii" Margin="0,12,0,6" Foreground="{DynamicResource App.Foreground}"/>
 <WrapPanel x:Name="EditColorPickerPanel" ItemWidth="32" ItemHeight="32">
 <Button Width="32" Height="32" Margin="0,0,6,6" Background="#FFED7A1A" Tag="#FFED7A1A" Click="ColorPick_Click"/>
 <Button Width="32" Height="32" Margin="0,0,6,6" Background="#FF3FA7D6" Tag="#FF3FA7D6" Click="ColorPick_Click"/>
 <Button Width="32" Height="32" Margin="0,0,6,6" Background="#FF7BC96F" Tag="#FF7BC96F" Click="ColorPick_Click"/>
 <Button Width="32" Height="32" Margin="0,0,6,6" Background="#FFAF7AC5" Tag="#FFAF7AC5" Click="ColorPick_Click"/>
 <Button Width="32" Height="32" Margin="0,0,6,6" Background="#FFF6BF26" Tag="#FFF6BF26" Click="ColorPick_Click"/>
 <Button Width="32" Height="32" Margin="0,0,6,6" Background="#FF56C1A7" Tag="#FF56C1A7" Click="ColorPick_Click"/>
 <Button Width="32" Height="32" Margin="0,0,6,6" Background="#FFCE6A6B" Tag="#FFCE6A6B" Click="ColorPick_Click"/>
 <Button Width="32" Height="32" Margin="0,0,6,6" Background="#FF9AA0A6" Tag="#FF9AA0A6" Click="ColorPick_Click"/>
 </WrapPanel>

 <!-- Akcje -->
 <StackPanel Orientation="Horizontal" Margin="0,12,0,0" HorizontalAlignment="Right">
 <Button Content="Zapisz" Width="100" Margin="0,0,8,0" Click="SaveEdit_Click"/>
 <Button Content="Anuluj" Width="100" Click="CancelEdit_Click"/>
 </StackPanel>
 <TextBlock x:Name="EditPanelMessage" Foreground="OrangeRed" Margin="0,8,0,0"/>
 </StackPanel>
 </Border>
 </Grid>
 </Border>

 <!--3) Pasek wyboru okresu + trzy panele POD nim (wspólny kontener) -->
 <StackPanel Grid.Row="2" Orientation="Vertical">
   <ctrls:PeriodBarControl x:Name="PeriodBar" HorizontalAlignment="Center" Margin="0,0,0,12" />
   <Grid Margin="0,0,0,0">
     <Grid.ColumnDefinitions>
       <ColumnDefinition Width="2*"/>
       <ColumnDefinition Width="16"/>
       <ColumnDefinition Width="*"/>
       <ColumnDefinition Width="16"/>
       <ColumnDefinition Width="*"/>
     </Grid.ColumnDefinitions>

     <!-- Struktura wydatków -->
     <Border Grid.Column="0" Padding="12" Background="{DynamicResource Surface.Background}" BorderBrush="{DynamicResource Surface.Border}" BorderThickness="1" CornerRadius="8">
       <StackPanel>
         <TextBlock Text="Struktura wydatków według kategorii" FontWeight="Bold" Foreground="{DynamicResource App.Foreground}"/>
         <TextBlock Margin="0,8,0,8" Foreground="{DynamicResource App.Foreground}" Text="{Binding ActiveCategoriesSummary}"/>
         <ItemsControl ItemsSource="{Binding CategoryShares}">
           <ItemsControl.ItemTemplate>
             <DataTemplate>
               <DockPanel Margin="0,2,0,2">
                 <TextBlock DockPanel.Dock="Left" Foreground="{DynamicResource App.Foreground}" Text="{Binding Name}"/>
                 <TextBlock DockPanel.Dock="Right" Foreground="{DynamicResource App.Foreground}" Text="{Binding Percent, StringFormat={}{0:N0}%}"/>
               </DockPanel>
             </DataTemplate>
           </ItemsControl.ItemTemplate>
         </ItemsControl>
         <TextBlock Margin="0,10,0,4" FontWeight="SemiBold" Foreground="{DynamicResource App.Foreground}" Text="TOP3 kategorie"/>
         <ItemsControl ItemsSource="{Binding TopCategories}">
           <ItemsControl.ItemTemplate>
             <DataTemplate>
               <DockPanel>
                 <TextBlock DockPanel.Dock="Left" Foreground="{DynamicResource App.Foreground}" Text="{Binding Name}"/>
                 <TextBlock DockPanel.Dock="Right" Foreground="{DynamicResource App.Foreground}" Text="{Binding Percent, StringFormat={}{0:N0}%}"/>
               </DockPanel>
             </DataTemplate>
           </ItemsControl.ItemTemplate>
         </ItemsControl>
         <TextBlock Margin="0,10,0,4" FontWeight="SemiBold" Foreground="{DynamicResource App.Foreground}" Text="BOTTOM3"/>
         <ItemsControl ItemsSource="{Binding BottomCategories}">
           <ItemsControl.ItemTemplate>
             <DataTemplate>
               <DockPanel>
                 <TextBlock DockPanel.Dock="Left" Foreground="{DynamicResource App.Foreground}" Text="{Binding Name}"/>
                 <TextBlock DockPanel.Dock="Right" Foreground="{DynamicResource App.Foreground}" Text="{Binding Percent, StringFormat={}{0:N0}%}"/>
               </DockPanel>
             </DataTemplate>
           </ItemsControl.ItemTemplate>
         </ItemsControl>
       </StackPanel>
     </Border>

     <!-- Szczegóły kategorii -->
     <Border Grid.Column="2" Padding="12" Background="{DynamicResource Surface.Background}" BorderBrush="{DynamicResource Surface.Border}" BorderThickness="1" CornerRadius="8">
       <StackPanel>
         <TextBlock Text="Szczegóły kategorii" FontWeight="Bold" Foreground="{DynamicResource App.Foreground}"/>
         <StackPanel Margin="0,8,0,0">
           <TextBlock Foreground="{DynamicResource App.Foreground}" Text="Suma wydatków w tym okresie:"/>
           <TextBlock Foreground="{DynamicResource App.Foreground}" Text="{Binding SelectedCategoryTotalAmount, StringFormat={}{0:N2} zł}"/>
           <TextBlock Foreground="{DynamicResource App.Foreground}" Margin="0,8,0,0" Text="Średni miesięczny wydatek:"/>
           <TextBlock Foreground="{DynamicResource App.Foreground}" Text="{Binding SelectedCategoryAverageMonthly, StringFormat={}{0:N2} zł}"/>
           <TextBlock Foreground="{DynamicResource App.Foreground}" Margin="0,8,0,0" Text="Liczba transakcji w okresie:"/>
           <TextBlock Foreground="{DynamicResource App.Foreground}" Text="{Binding SelectedCategoryTransactionCount}"/>
           <TextBlock Foreground="{DynamicResource App.Foreground}" Margin="0,12,0,4" Text="Ostatnie transakcje:"/>
           <ItemsControl ItemsSource="{Binding SelectedCategoryRecentTransactions}">
             <ItemsControl.ItemTemplate>
               <DataTemplate>
                 <Grid Margin="0,2,0,2">
                   <Grid.ColumnDefinitions>
                     <ColumnDefinition Width="100"/>
                     <ColumnDefinition Width="*"/>
                     <ColumnDefinition Width="120"/>
                   </Grid.ColumnDefinitions>
                   <TextBlock Grid.Column="0" Foreground="{DynamicResource App.Foreground}" Text="{Binding Date, StringFormat={}{0:yyyy-MM-dd}}"/>
                   <TextBlock Grid.Column="1" Foreground="{DynamicResource App.Foreground}" Text="{Binding Description}" TextTrimming="CharacterEllipsis"/>
                   <TextBlock Grid.Column="2" Foreground="{DynamicResource App.Foreground}" TextAlignment="Right" Text="{Binding Amount, StringFormat={}{0:N2} zł}"/>
                 </Grid>
               </DataTemplate>
             </ItemsControl.ItemTemplate>
           </ItemsControl>
         </StackPanel>
       </StackPanel>
     </Border>

     <!-- Porównanie z poprzednim okresem -->
     <Border Grid.Column="4" Padding="12" Background="{DynamicResource Surface.Background}" BorderBrush="{DynamicResource Surface.Border}" BorderThickness="1" CornerRadius="8">
       <StackPanel>
         <TextBlock Text="Porównanie z poprzednim okresem" FontWeight="Bold" Foreground="{DynamicResource App.Foreground}"/>
         <StackPanel Margin="0,8,0,0">
           <TextBlock Foreground="{DynamicResource App.Foreground}" Text="Ten okres:"/>
           <TextBlock Foreground="{DynamicResource App.Foreground}" Text="{Binding CurrentPeriodAmount, StringFormat={}{0:N2} zł}"/>
           <TextBlock Foreground="{DynamicResource App.Foreground}" Margin="0,8,0,0" Text="Poprzedni okres:"/>
           <TextBlock Foreground="{DynamicResource App.Foreground}" Text="{Binding PreviousPeriodAmount, StringFormat={}{0:N2} zł}"/>
           <TextBlock Foreground="{DynamicResource App.Foreground}" Margin="0,8,0,0" Text="Różnica:"/>
           <TextBlock Foreground="{DynamicResource App.Foreground}" Text="{Binding AmountDifference, StringFormat={}{0:N2} zł}"/>
           <TextBlock Foreground="{DynamicResource App.Foreground}" Margin="0,4,0,0" Text="{Binding PercentageDifference, StringFormat={}{0:N0}%}"/>
         </StackPanel>
       </StackPanel>
     </Border>
   </Grid>
 </StackPanel>

 <!--4) Szczegóły (pod ramką kategorii) -->
 <Grid Grid.Row="3">
 <Grid.RowDefinitions>
 <RowDefinition Height="Auto"/>
 <RowDefinition Height="*"/>
 </Grid.RowDefinitions>

 <!-- Podsumowanie wybranej kategorii -->
 <Border x:Name="SummaryPanel" Grid.Row="0" Padding="12" Margin="0,0,0,12" Background="{DynamicResource Surface.Background}" BorderBrush="{DynamicResource Surface.Border}" BorderThickness="1" CornerRadius="8" Visibility="Collapsed">
 <StackPanel>
 <TextBlock x:Name="SummaryCategoryNameText" FontSize="18" FontWeight="Bold" Foreground="{DynamicResource App.Foreground}" Text="(Kategoria)"/>
 <TextBlock x:Name="SummaryTotalText" Margin="0,6,0,0" Foreground="{DynamicResource App.Foreground}" Text="Suma wydatków w tym okresie:0,00 zł"/>
 <TextBlock x:Name="SummaryMonthlyAvgText" Margin="0,2,0,0" Foreground="{DynamicResource App.Foreground}" Text="Średni wydatek w tej kategorii (miesięcznie):0,00 zł"/>
 <Border Background="#2255AAFF" CornerRadius="4" Padding="6" Margin="0,8,0,0" HorizontalAlignment="Left">
 <TextBlock x:Name="SummaryTxnCountText" Foreground="White" FontSize="12"/>
 </Border>
 </StackPanel>
 </Border>

 <!-- Dół: dwie kolumny -->
 <Grid Grid.Row="1">
 <Grid.ColumnDefinitions>
 <ColumnDefinition Width="2*"/>
 <ColumnDefinition Width="16"/>
 <ColumnDefinition Width="*"/>
 </Grid.ColumnDefinitions>

 <!-- Ostatnie transakcje -->
 <Border x:Name="TransactionsPanel" Grid.Column="0" Padding="12" Background="{DynamicResource Surface.Background}" BorderBrush="{DynamicResource Surface.Border}" BorderThickness="1" CornerRadius="8" Visibility="Collapsed">
 <StackPanel>
 <TextBlock Text="Ostatnie transakcje w tej kategorii" FontWeight="Bold" Foreground="{DynamicResource App.Foreground}" FontSize="16" Margin="0,0,0,8"/>
 <ItemsControl x:Name="LastTransactionsList">
 <ItemsControl.ItemTemplate>
 <DataTemplate>
 <Grid Margin="0,2,0,2">
 <Grid.ColumnDefinitions>
 <ColumnDefinition Width="100"/>
 <ColumnDefinition Width="*"/>
 <ColumnDefinition Width="120"/>
 </Grid.ColumnDefinitions>
 <TextBlock Grid.Column="0" Text="{Binding Date, StringFormat={}{0:yyyy-MM-dd}}"/>
 <TextBlock Grid.Column="1" Text="{Binding Description}" TextTrimming="CharacterEllipsis"/>
 <TextBlock Grid.Column="2" Text="{Binding Amount, StringFormat={}{0:N2} zł}" TextAlignment="Right"/>
 </Grid>
 </DataTemplate>
 </ItemsControl.ItemTemplate>
 </ItemsControl>
 </StackPanel>
 </Border>

 <!-- Ustawienia kategorii (USUNIĘTO GLOBALNY PANEL USTAWIEŃ) -->
 </Grid>
 </Grid>
 </Grid>
 </ScrollViewer>
</UserControl>
